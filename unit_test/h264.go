
package main

import (
	"../h264"
	"fmt"
	"encoding/hex"
)

var fuATestBuffer []byte

func testParserNaluHeader() {
	hs := []byte{0x5c, 0x81, 0x9f, 0x79}
	he := []byte{0x5c, 0x41, 0x7f}
	h1 := []byte{0x41, 0x9f}

	naluParser := h264.NewParser()
	naluParser.FillNaluHead(hs[0])
	
	fmt.Println(naluParser.NaluType())

	if(naluParser.NaluType() == h264.NalueTypeFuA) {
		naluParser.FillShadUnitA([2]byte{hs[0], hs[1]})
		fmt.Println(naluParser.ShardA().IsStart())
		fmt.Println(naluParser.ShardA().IsEnd())
		fmt.Println(naluParser.ShardA().NaluType())
		fmt.Println(naluParser.ShardA().NaluHeader())

		naluParser.FillShadUnitA([2]byte{he[0], he[1]})
		fmt.Println(naluParser.ShardA().IsStart())
		fmt.Println(naluParser.ShardA().IsEnd())
		fmt.Println(naluParser.ShardA().NaluType())
		fmt.Println(naluParser.ShardA().NaluHeader())
	}
	
	naluParser.FillNaluHead(h1[0])

	fmt.Println(naluParser.NaluType())
	fmt.Println(naluParser.ShardA())

	//fmt.Println()
	
}

func ParserToInternalSlice(pkt []byte) {
	naluParser := h264.NewParser()
	naluParser.FillNaluHead(pkt[0])
	
	if naluParser.NaluType() == h264.NalueTypeFuA {
		naluParser.FillShadUnitA([2]byte{pkt[0], pkt[1]})
		
		if naluParser.ShardA().IsStart() {
			fmt.Println("-----is fuA start------")
			fuATestBuffer = append(fuATestBuffer, h264.StartCode[0:]...)
			fuATestBuffer = append(fuATestBuffer, naluParser.ShardA().NaluHeader())
			fuATestBuffer = append(fuATestBuffer, pkt[2:]...)
		} else if naluParser.ShardA().IsEnd() {
			fmt.Println("-----is fuA end--------")
			fuATestBuffer = append(fuATestBuffer, pkt[2:]...)
			
			fmt.Println("len: ", len(fuATestBuffer), ":\n", hex.EncodeToString(fuATestBuffer))

			fuATestBuffer = fuATestBuffer[0:0]
			fmt.Println("clear / len: ", len(fuATestBuffer))

		} else {
			fmt.Println("-----is fuA slice------")
			fuATestBuffer = append(fuATestBuffer, pkt[2:]...)
		}
	} else {
		fmt.Println("nalu : ", naluParser.NaluType())			

		fuATestBuffer = append(fuATestBuffer, h264.StartCode[0:]...)
		fuATestBuffer = append(fuATestBuffer, pkt[0:]...)

		fmt.Println("len: ", len(fuATestBuffer), ":\n", hex.EncodeToString(fuATestBuffer))

		fmt.Println("clear / len: ", len(fuATestBuffer))
	}
}

func testShardAUnitPack() {
	p1 := "5c819b9f49a84168994c0bff051038ad12a1d065cea413c46cd10e9d15c3522b37e2bcd4527e7afa5788485939cdf48259182bbb923f376cc4e2115708d3d6fce210e61e9ea769f2091c6b6b9bf55dbdd1ab210c4c9eaa69e1d19f8d48ce4f4bfcddd9ab0ce4fc22a8bd437a53a18ba72af1299e7f2a5bef0a733a324a454fbeb28831bec2bd3dbd915768c159e021bb6aa76c030838594347a45000ba52ee6d78348f1ca58ff137c2843e514e8cdeb17eaee941d950bd2586f530be9f12fa614ad18aa8d8190b54ad17d2c0d62b14b3c988adad8b3384f250416113d5ac0bb5a7ed1273e2f5200a652b715ef214f0bd43fc4cb7eed3a1c97f80e47ceca1e1ab3859f5342400e67ea39faf1d3a65de645ae18026fb97055b6d4743fa9712755f69dbe7a9657e14ecaf0b89f9982a81cebc191b1a56aa674244184ac9340f80923602a6d0eb9f240a84295ad530a4c520b5bd4c02e02db68732d8ea6a39b68b4d0db012a53154cbfe682e5334623d9f43c5731c80d15eaee3f56b1ec049ff637b15e4e1a721395c1ff1f2f1eb844bed319d035f7410dcdb295553d9920c5bb1a0ffb51198c4bff4939188974c60973f323b4792c5773742ff1edc7fa9ef5746e3ff1585480fb65c43591f9debd7ca59b5bd3bd96bc32931a00717a43fb9be3cfe563bb7e258986dd5104cd73c1c2f31c0cca5fcae367658148c78ff3bea78b349596f88125f5ef77d7887eecd717ea6ac49807ae88c2b135d6058ac097a331eb9a8a89c3413d17774068d16596c0d8ac1d5fb4c0698f974902078ce7dc8e230b2c8cf2b9b80256be5e304948d154b09d4bd13bc70bcfb7ea551917e9c1f71a9d5ec3e8e79c83c7a88e41b8b5f81ad38de7f17a68eb63bdf3a80e75e0ab08a4973a0e6ac3a79e6393396677009b1c408597b80251d174a283e6a6433fc1b6ca68aab727f4fad2d5f1d6b083d731b82e2c205b4d50d25c8797cc8d1250ed2540b1eb18ea1953a33663b72e952896f0b758a6adbf820aaca604000b357f2d9904756b83d435f40d1927fa5700eaa689b80069c3bcce4857996052ff63c38b0abd78d53af68e9e3d23f81dffc25ccb48f3f4afe0eddef47d1a13369270cd00cd20e3661d668e3cc231ec1267c6df6d7b1cd355fa2abbbfda2f115f4e7cb60204c685bed2241d8fe718339413114860399aaf756c02b10db0493113f5f63e2ab5cd2e592b4cb8e11f385047bc63dc68e5cab3b04838a16019b1d3b500a056574ccc65dfc4b46ef478c24efd1d98cea63cbd4a14618c3307ab712a7081f0622401be3aa83d6b5b15741a9a74df5efe94bd93dc443aa772c60a3bb54409707377b61c91326f0996ba4b23b8334f3f6afe73bd9a44772c320e6820810d43d6ccca310e016c60a372514fa8ef96bb16729ad14ff28ecd04dfdf437e3ccf5b370a526590ea1384e5d5ccfb7f43f81991e476c2bdacc1547e3b85ae6a42850f3a2b8b9fb6f5040ad31a43cabd8dbda1cc3f9812bcaa47e408b4eb258e9d6b2bb520755c2d7968a21139d63845c0f27ab0a8a590f3fc2c9330ab43185134016c4b311948124d607c95930564beb79911c49053bebbaf4321a501e93bbdb7e28653315bb4a6372aab2e8b0b667b16ef5d5161fa08241be52a93d7d59d61963eacc11b57b0ab6400362d361a2d884005b7d7989f4ae9269ee1678dababc1a15311e2972591c148f4cb4deb04da82feed6cd6e9677e1b3cb53d0eadb3eafc8391e13815d182741bfeaa05510cdcb02cd946abc42b6472040537e640692e0f29667fa11069087d93942f0b03914ae694f4d79ad058d69c01b243cc27638a573600b5dd0468e9de0093aa322215136fcc026f18a90d713c03aceb74f895fab4c4bada5eb6d633d75c5be5d8736c0b862a4cb3d63e20ec525d8f573b8c0437aa2ba6d1e73a5e5643a552736e228e62886ee4303deca903e4cf8f6b627896e9ea94af3fedc0879573bac7c64fe38028c70e873185b0bb7f3ea597ba836871979f99c4950b740883fa2844e397d303a95982bb59cedc948f3294e7683c71b"
	p2 := "5c019120fad33885c9619a9313d9c73049455c394ce52e4d2f305b4951438ff4299d9598a22b399006904a296c3eb6fffb2d0f66bb6a3d2fc17bcf39b45f074dfbc9621d1776cfd26c61704952955b527151c60e19933c663d3b23c845b9da954740d2d196ebf49d3d5cf471288ebbc052a4bb6575eb8df89c084e0c6100798d1990267c0945805e0fda5bfccffcab88b86fa50e20a934448c468734e922dd14c5a88eb029cec6becc378cf05df0cdc45e7eb3fc987ae3e6d9137b2e0e09ef12d919f5e49346b010199ea65c20d9fa358159c876b1ce8641f55c6f78d0383d79c16f56a62d3ccadb6fc49c6f747afc773cc449d50d057a3d3748759862797952a88c19ffad3933939f707295849a4c0405ff0db28720d23f8f9acea51e279f9a046da3b7da8f92b255029a684450966518ddf8a40364f4878c99b77b8a6c7c28b99e9c6e9109c127747f17d24774d104053be5c3fe3645740ed117e1337060e2387fbe8929be918c57c9f9fd133c0892db4ea7686b55ec15a24ffb89061d02a30db2972c23e1c43f3feb5fa99f14789964666a6886accb9029ddf9378159198f3c72c4c786fd816b51ea850a9623472b721ac7f66d5dc0675a6bcadf40d4e9998aee520f7397225c5f56cd8698308cadf55b4c8857f90c7ce196b08d5c1f6d589f13591d2eeb78141ddaf81d92adb682304262761357fa50b2fac8e6156c4769da26eceb11c703f71b20ef11075de74c56e6f2990530646b8aaa3f8be84e6e89add2312752d94936a20dc045303a6718ef3a48aecfc54dc617a4ed2ced18250d31acfaf5dfffc5a709f26cd57c6f75dda8d71ac0ccd55c46a9f484a0d2b2fad66c63b5b5eb0cf3326eaeae3ae60f0c6e9dc333ac5e811721476261983373e6c30393cf4056adf1525892e11895adb04541ae13fa78379c5ba61bbcf9b85c4b2ff57897c34a3dfa23af3028f1c38ae94b57066968d07a40d8d5cde0bb3174779a6847c60b2ab1f0cf594246ac5e81f5d916f80a62fe3b85ffebea27b6917ce7a7acd200ac57d11c14ebe6431f54e1f1518fcc665f814658fa4180fe9717787122791908ccafaa1c132676a0435a1064ff1e0691fb14a29f21852b66eb0f58a63223641ebac1476d35b443c2185c5916817c201ffc2d63f870c78d199f550a9a47ca573fc21a0cfbcb5e5ca148c447a056e20f79b820309cb7039ee667ca7752037a074a7707e61aeab2587981eb18ca5d7b9fb99e80457fed0abea4e18b99b6482f6f870ea601ca3ccf36ef544265b8ab317677957aee9002e0b0041495061482cfc6d76e23e20f69568f98d479ad2152c7875a6901209aa00004d2359fc4db49bd6f534ac649c553b259ba0379cd58f8cd214bc862a08e716cc9bed7c000cdd0444457f9e5cd5207187f247db34ff387392f0a6ac67be1dd71972c52e20c2196e84cd71f628740880f760078335600301badb352e50ecc8de6b977da6dd256b1d15b412031dd737fd65c89306b5bc9d739b25cded05bcc65e0e97570af433c19181e204d4a7cc7914b02515fa537590d86a89f2c8586096de384801ad935a084ce779f6c5987ef20ee818f53d89d900047c4a6072c9fface7bb2c8c932424a81bcc708953b675fb249d8043a6af422ef52e355d9b16d87f4c96d75fcf54c3168fbbe5b16e639ca979ca1dc5c6f5c9c36a2b9ca3015ff498bff219ba317b129f45121a11db0ff7a2d58f529bab5f29ea364645083e0deef029fbb676054f228c38d11fc872eb60f4ec59bac211d5d7631273249d7e1e4dfe5dc4cf2b3838ee0a5eb8ebbe37ea7ed71b3b6594afb779114cbc433bce6512b46aecce3b5d7212b33fdf0e46307fe206b024ed3660e0b7561741d10f191478fbf49b9235ab4f98291dce6b13a60e5c2ae84f513f3976e1f85041be0f14296425ff95bc452e2714990ca870b6ad97955b259dd9ae8316e12666b44eb148be6bd26978eb6f226e6e2a8351fd34a7b815f14780641a29bb6334a284c6453af458c22ada169349101c6e85e005ba9c51260b3d45b6dd65fe73e0e7cb7ccd7"
	p3 := "5c01d42e72428cf5139cb7ac791b84886c7b7d53d1623a3b1c2056cdab011484555df022732026d815b7b94251cac00a1b5c46837b28bb5b23be2d0d818af31a2951d06250ba101b24e45159f32476daad1331f6e564ad1b704058f9349e8d5818963fada3eb8ada26d37548e1961be884077061f6546bf6e4bf139692cecc91004fa71d7b2783b45847cde60d4448b5a3b499f379ec67c65d734be0a5b068dae2a548f80a50fd02f33651889872f5ae670693709c15f5fdfe663cb2a54840eba8ea8ae6833e12951bd22a52f797497359233c618b30552c214bee34ff2a41bb3989c76a0a5a99d2df8d0b8cefd05adba82f021b4d5c7e88a8e48fd3ad22104ace9564cc8625de8a768d66ddc8a320d7a4a1667577c1b2a0d0103da5ace8c790848ca57b4031e5258dfe141dd153514f92f8ac3deb723e424675514ebd5db60ad9fe4fe6ade8e9dd4c4fe750e4dfce4f9231bf0b7ddce116ba080670d946cc4b0016c484b07e35bb91fd477c585d9d4b07d2a875c8a3c0ddde1bb7ac477596e1333c2936e30d75c82b455e408ab2766e2ae055b186a54ad348f8be2e27146fee3bfd621e8cd4c74e41bdfc7c2a79cc85764fcf571596bbd5872edde2f245296433a93c117e09525f718a193a8dc2616d827cc9664367aedb30a19ea295c5d3838fa9003d598614fe0a1c2b687330a0f8a619ad8560b797490b8a7992c4af3811abb1aff786e361a01d0fe5202acf36dca5d958df19af1512f678004a9b09c07e03c5e9ec979b6f2d625197dd299aeec114c6498470edcebab6d3009c81cc4bd7c66a3ef4475c0213b319186656b8d441eb857f23649da1e6b0a5c9ae6bd7141780759d13908ec21ffa5bc27bde33694f0d86a5f10c37927012ff87a619e9a2cabce262554936280ca4435bfc64b334f26f6cd189534d2146b3329b7e37edddd9be6c1b61dddb7d4b738881ef59b9b1a80186fb92e9b18f2c6d0a2a1a95a3963376f76c02f1d5c90a2a08e785c078f5c3a15e5e8732348e7e9b7afe8886e5f94d4c6a23569d1f6c3172a10154e76459887e237996396b341890c9138fccf8f84d73de550ed9be7b614f77f2207d43e047fb986465f9eaad77f50fbd9e409fd789382ce5bc5b70d12b92d71ce47f1fd9810a0de191ab1aa8244b6ed07ca7fc620bea792df9a3fd64f4edd612fc656ddb816b9de6aa4d0192ccbe00bfee2b0c9b95a00c0850265ae6cda7a686b7420f2e6d799c4303b57e59f62d2bc4ca602a5705ce4630aa31e267ee26bb26f2ce8cc11b5204c54f848f5ec31a05ebbfb49763d1ef03717627ac8ae7abbc25d6dde401201d7410673ce8826fc5468afefe8428bf295da7a52aa4b407288f817bf0a104e4c083db895251bcdb34144413430941e7becea5e9bb977e7ad35a0aaa5e7b577be0bcb844a56d37fd036bfef8bf16e272d76338dc39f97cbfa844cf4d1eb0f262422484c22e0a31d2dce14fb37dc91613be7481f52889d4c89a751e8d6e124e15e3ecfa707257ac7e71f6f456e971cfcb36c3897cc26fc5a68a996b5dc753ce8b18b39e3ce41b07c647b661c97858fd4724c4c36c1a600dad51dde0cc2b63d711c2dc45251b35fe194ff9edaf43b0c9cce3696dddbb5afcc43afdfe7c1e2ebd14695a94704a3a4e8511dc00e9d18a899f1ddf847ec6e81e10c9279f9d2087b84d7dd2f3081e2328276b86a0f7914d3a58ee723f68ad8e693a4795c8c9682eeec77559c601a4ff3538033c01fb9f349056be35dc38f8802a311fce92fd6cda66bb814b01b42735fcbe5065502f91e1673f1f86ac83e509af1bd1b6a3dfb85e5503d77988499806f3db0ad7303476509f66880721413322ca8e4be59812a470541c965b08fa6eb5bb4d017ec387375c4a5aeb5583d6044bb9c4c86ff3dda04d8b0dffa6c7de886ad3f39d7cd9b860cde90deb1e7e3ad4f6081c952fba238c53b799cb30409929ea13a98910c514e890ee14a9c272cc34ac7d7f1d0163f86ee37506241076f629a7f5964487b2ffd9da2371de91fb5902e32701254bb7d6bb3241f32c023dc5"
	p4 := "5c0187dc5510ea0f039c00700825e57a0d45705fff39b6ddc26f4e25e18278d10bdc316d9e9692533cdbe83c614762e75969c54f516457de718db11de86b4ad12f292a36ede376ebf2e3c42b372f8c802971312cf48fcabdc9905e8358e3bf406f3f5ca6a9256f1a05b9ae72adef532a3eb0cd7518e36d9eb191105b60370157d1a2fb113e8531ff15e4867e18de043882e34d6091f2a54381ac91adcb326a180a3e7fadea5bea92eb8f85a274ee7a0617420c51b0c6d1d5897ec553d03b453f5b9dfa2e88fc30f002abc92c542843a8f496cffcd391f084f96166e124897ba30eedbded51677211eb31d1f25f8d4dd9293a1ff14f2d295ff25d75a455cb5355b038f5e2e55122dd74efb4d8d05e9fa545432a2c65d4a10a5ce4d916b130f86fb90b2becebb1b855afbfbf59ee57705a3172ca8b7c9278d7f174ac295ba4febcbbaa65e6dea42e8c614228795fb835b6f82ee0755a9e8c847bc0124e926826a503d72b8553c2c850ba6d6e4de8ae48bbb0a334761095f737a50b99607be23005095e6f00123a2bcc9f8a22888136a8442f6253f4892bf701311060d9825b1ac248084955c7869eb6aed5d16a7b42e509b5e2c7cedd87455d7e91e368ec3f6b7ee8db5b4034ad80ae877f19bbf32dd0ebb66df4ca779980d3d780fac1b3a478070bd0a552424e77d3036eb46865374ddc3e655f374aa320bcedc9c5f0bd9be7563f5e688cd738e165efc0672d0b04c25d81122b56c049663152da49ecbfe4a48b58f9f5308ff75e07dc4a3fa520f3ff996dbf8e9b273af1689ade84c0529359574f2cfae4d44e8889b54559641cbfce83d9d297e376a3cf12acadf1fc4ae59f7351fc736c40d97de96f4b65a5a3c011d168d9ea308fc5a7e13052fcd512d4e596d45cecc4c247fd979a92d144130e54cecbe983339411d508b0d4b75ed3adc9d3c5ee287793a750f8d215a71ac0c59f14bad08a0f119e1f9655268981d5d9379126e6af68ff431d79ca2cbc308645a7d112fe4560f52add610169a71f9d7c4a398cc03e05075a0334574de8384412b11c09e8426d890e8c36c1312bc3253a06a72d6a1e2f6223147c85bdd5b5cf942cfb90970803918a95574a7f9aa8fb64a1cb284318914e432935a49df2f456a70730b5a3fc82fcbf6c7619ca0daa5007c19a6e43314d3a186b7b553b11aca9e72c83ee39d8a70cb74a9388adba7d5872ada05f43b222e40acb83f1efd012ce942a152b41db6f8c43a5649b1e570f6078b0fe2ea7d67064b0c7c9868d86e26372d1b3793592e4f7f24856c001b80e19e82df1dd795adf2f382c2ca9c6730bba8745a692a42aa704aaa34d02bb06596b2f17a20a9139d1cf18d55d090368ff39ed81e55f3a45f1eb18c855f963a572fb9eb46e188a2f69c95d0900e218bf4f45846c66383a02c5fd8f5dfc3e49d25a84976dce57af74da14a48941a31d0aa69c565f2e319e68e461191490241179eaa976734083180008f08bb023717f10382c43bcb7cae7ce19f3576042ca8eff193e7a9d50b307ed0168696e880842a445185cdec2be071fe106c55c654b7153b5562271f7637debaa4f60f5028a56b83d86dbcca86f57926075469d5fe918c4603e346b5f68b8fb6063dd0d0efcbc698b42e7797d3b8f28fc4c5b5eb5d64fafbf57f9db74747f65ef39f479254a4290f57232320cb4ed30d34e02ed50158c488c59032f5b038d9d1ddf562910f5880324fba2e1f77a97e9a9cdd769dfd49595e6a01a0ae8afcbbacf25e9fd9206cf442f50977bcba42c954c154032e9ae88f7ef5ef5fc34283b652d7208e09bf05f072738897558c8adda1d716750eb530ef6473b46450d1b37a7c6a9aa5537402b0d26b3778b52c2e4f9bea57c2b6b72992e7085cc2352e5f6209f905702864b1dac706d6f00c784088f10408aaecb2074d179c523fe2be7e918e51ca71ad1611042823f6f3c6acf262ff7d5d8a6e03deb0a9e2d7f011b20a4e2da5c419d6ca6b7e0af3a0554f81ecfc21d47d95426179db900a4c2e49701fa7d8e7ea9d5ec393c7f55a052ec5ea996112d"
	p5 := "5c014137e6a954f9b9f74ab72252b5c8b53acb7e39de9c3d795cd56e90c36ce6019a35697f5f34d8d5ef21b3aa7cb3f609a6833c7aed8314bafc17bee7c6eb0d6de246d2f499cbf230f54350a7e0387283d1b0188a20af1c254cadd08a7799801797c8e79a80a20c90d47e0fe80b12b6689ce1dcd14d489527d8dfc57c12a5c570c3c644771b944e08b39e2b3c77d183aa1a9e5a660c716f13435e75751257fb29684c8f3b6b93befb0d70b485e8bb72dd827ceaabbb656de03a9877bb726b199ce992470778f9c8a57b6248c59e68f31ba396f7661fa5365577f5aa5d536f18ca398563908209267bfdf432a9e53fca98e19c25f77ed77dc4d5e7183cdd1575ddf909fda8afd31da3c2d0ba3ade2f1dabd0f8fa3c0eed3b925595e515ba9546377dc4da353c27fcdb8edd297f22e4bbc35408119f840ef8fe3d8702e451812820f3ecb7216f5ac9cfedd1258f8d1926be19a9841d0af7f6620c421623dd1799729a3aefd072d8a90b4b3e500d4bd0323f0e1d8745b672663d9fbd45f6bd8731401ddb5515eb224e056516663be4b4def4ceb801b1398c10307f07ddc2c4a67697f7fe5bee052fae0cba666282f82d6f2be883014e1eb02b4dd3e76f726b2e4490dd5d5ac3b136cbc804195fe7be9d7ba908aa04a82db08aadbb564f952eeb27815f466c04526419315393d0cae56e1a5176902a00df64d8c991c8b61e3aef361e4b88fe5378965e5064ae131d03bbc60bfff0f442747c04bafbda43a44e68ddacb2268715e77a8184c0b09360b5f09fc1ef615fec84acf62ecbda23fe18d2a8f564ff789acc843b9978c61e112256ae30273ff5ee036099beaece3eaffd1f9b94dd5059de9624cd117a3accc22ac4675ce94d4572bcc9c1e7a4a5c68f04462e78f78a3feb4a3b74440af5e74a85858f544247c71dc3d7ed1e1d1c5356ae8d138c0b8e013e4f82f90da81f312ba1de9709cd5fbec1dc54210f585e436056999a54ba9a0a4479538ef7dc4da5573770f229b779bc83aa861e4be55cab4d0bdffe87ff6d6b05fd931316389d024a3b749cdd89b0ccfc02c0b130c14f2d9be64484bc221a246d26b70eebf49bd9d1deb5980d74137c96cb77132620e82675aa620a036bae2b69039e5b937032d8bacd6b0bb4cc2f5cdb7fef6ce149353e1abe254fd9e0359e50c274fa036d73d94bd2672d808b073b6694b14417c9d1c2f1ec54a8bd59b6a0886b3cf19080d6d58ee76e6ea3d54068add5d1533268869deb0867bf37c5f5ffab5a8751e93d82cd3b12cce7731f42a3d2cf170a7474497a355c9eda5ba21c42502351b67f1b08b70cd51e305674b73fe4adc41d8410810ee41991aba5ad1e9772eb5e42f48c0dd22fc165971d766a91fa858bada3a224a48fd1dcd1b245cc744e7e3b9ec78c26b6cc9ebadb1f34b3f884a0ba2ae997150a8f65a18249cd49752682684b9c5c9cfb166aaf9746593a8e64521379b8cbfde0e85fcd0393e3d71b92958c0265be9a67bfa0d2e3efc8b486dd3022fbbde3000711cdd3379d3ba55616614e31bf63c2b785fc9a29ce2baee078a6963a62c8069f44d2c2c53f18b3ce9e567c74e3438675d509c89d12067dbcd682694f4b18f9759a365e74330c4016a0f4ea336d19cc039c9db9795cfcf974fa1b8b87bfdff2161f9e0aa9c6a894d65449eb162fddca9ba7dd7114dc7b0ed9531e884008e91430cb69ef563225eac87994190fd011632583ca7c15fbd9ed5c73265a62e80093634b640c8d4717fdb3f560790b05327633b33e6ca41ec27340acaaa9f566a065a40c7f1928ae8d008b08742fc24acf6a750a40f7b00668bac8f81a1cb1926e24d6542a4bb53e224762d2bacf4c45fde81b0e2b6a79a6ec1416ce08563b6c61b2bbf6fd75d6fbfe266793ffd6b3f285e7466ebf8bc4259fcf6d5401dbb122f0647852b7fe55f0734aae5047dbaa4fc83a0356f1496afa5af9d75527f49a657ce24dd414e1012238cbc635676c6c3b9692e27335023a951903cf0c1a35d4338dae6e0e136e3b5f9b57641f469755dc968559818d3c264636de0e"
	p6 := "5c41bcdb5930b747738f0aabbf91b69154d28e909057fe5239531b8f961ccc316b69d32f175d903ebfc8a76ac333be008f310cb0b99fdde9175501c26f9ef54ef1dcb579dfa401787c125dfab859b24e3f78fd214fcb9a97c143413e04fef2f8aa34f2a18ff54b8a7864a9d8adc3d3156040677e2b35697835f7752a15231bb5a344d172b5e9ce90f8325a2b4280d4410e60997b812e1ff883d0a2e9ddc3b4ba08997075478a40314909a3c9801f427ebc8cde5d3ab717258b03b76f5c0fd1277671292a041a384b5b6d40f0e87a137b120cbb35c966be6d28e4b3dc4c5d0696d90c7295d79a5a204453ac4e26961e3a33e1f2f06ea8d6208eb3fe204104b6cdb08ae5c758ba5497ee5a3d76327adf64ff6ed2d60c17276fcef3b32b7c418c35cc7a00fff2cd72fb1c5aebb036b42ccd06180c0b4ef0646d8082fd267dcbd6b36d336c9170c098915569f32b5de341ff5c0f898949dd342b56492e8eb9cdecef90af08b55b42be29dad9f8995739c2093b825a465fb976822af93e96a7a1ff2015536b2a877473e22ebe26998b925ae19cfbd10d53808d6429ac2001e4645ec63cc48af24300c318abf6af41c432be8a81f346a15feca5c35d07c14c676504d318fee13d26366dea484db1aeb400357ee9c4210e1a2519b581fc8edba2e9c32f4cfb561a63525969a6a2f79f10615cfeb9e2d3b817143051d0dd77c945b43be987f8197ff1f499a383e5439300f21b124b933349d2b55b9775aa5af0bcd443d04c765e2e9b759794e28e8d0250d400a828cc40b6a4ff7665b5e7bdcf6a58aacf2da71df024c6d332f82f32890358ce4a2dca5b76b29d010bd06bea4f678b88ea2f9aab01cb218ae477ceb15639ab2968eabc46e3a99f0e25776b9ab397a5100bb9b650e2e68d936ad96ce86c0ff93dfd6cea8da3e440480ee7a41932ca4a4e4bd2b8f92d0c3e935f2b0d4218ae076f8cb6f02ec8d506f7bc9479f7d2f52d818e6df37cbe4772b22b2bad4639e94c53910014993052feeeff95410f7634b6134238cfbbfc9fac57539358c4ce999a1b8238d0c1dd112b7d87eb7eb5204912984280dbc097b3411573cbec4e077afe25a7c0a91744c4c95e67d7caab98d495b1de97718c842b02a2ba2b1602de181a66ea8fd37a6d4d9837d58518dcebe5def2e05ebf3053ba355c33d90528fc97dc634c62255d08dd6b44208e1086c249576b56247b94de80e40d2e442dd4c0e1dadd3ad12ccb93"

	pkt := []string{p1,p2,p3,p4,p5,p6}

	//fmt.Println(h1)

	for i := 0 ; i < 6 ; i++ {
		pk, err := hex.DecodeString(pkt[i])
		if err != nil {
			fmt.Println(err)
		}
		ParserToInternalSlice(pk)
	}

	p7 := "419fe145152c6758fdbd5c8004c5d52335a12a8d4aab7e6a5207fd275bdf12a41e9891b6466dc29feb27ca8d590e6c6b5d2c9a621bf7df34447fa105276ebfac5d7b900ba1c01dd7c9afd01fe2f340852839a974b1035c74dcb9a393cf065c5ca6d3934a07eef4c0aa5efdff7c074cbf1f3661ed3d37e3256500ba75128edaf118e6a837a7360344f57c24c2355f5ddf75ce8915ceba383f38c766481849a40daf84dc3969ef129d9fd2d64ef3df9073cada21b0037274b7e1a686defcb2e1cbbc03231032029ae2e9e30f9683ea9945ad30ba4fcfc391e1065c589781ddf7531e56706fae22283997bc11f979674ee80e9e79b2481f3a9f9fd1aebc9a70239b064f1c6ab00999a5d8e8b1bb229969e1ca63da50258a447b7f437e817368b6ff71ae19bd48d0d270259a019427ce0c338381a90ddf1e232c2c9b7a21abef7572f105faf55d844bb1c5e78510d7f467204fb7d3be63dd72cce87f47c44ef7cb0ae1df3b893410f75c64573ae46149b856100948f1e16b891cf928e3d4ad98668a6136d62b6045d578715ade16f30b365eee4f6b20360ce0a94255f7c48e7eb1d4e99606bc63f756f5a8f7865a272c0a40d1ab1e731aaafc53a4e01173f3106524b94dcfbb6de487c1596cbc2b70856579611ccfc0228222e1f818ad15eb33517af3885225683f9f74ee2976678718b014ec10c7661e701594fb214f3214804cfd03757ea413bcad1fc77fa986483eb25ca498b43ec5a294b1461d449679b543906e241b80346309ca0ffd3b2ef4b8e2df76f4d27a668966e9937052dea1d6663bc8ab39402cc54b465262168dc1c5678e814c9b875c2b848a3ac39688d2b8e6c24dbf6ea3139658470e9befb0c9c204ed1db62fba18d5053de7b03f5ebebe90ee32862f0eb0e7459dc12d876d4930aae673118eab182b0c5bd464c8cfdb7ce04aa7c88abc0e3f9183335f2c87bd0b0ad2d2b9b31aaa062b85d89c0c92ecfa70b43e94a527a275fc59459fea0356b2f977062a59a3bca77bbb4b2b19332b8f48b505fd1429fe8777a69a8698602139c61731ce14ba3598fee9b24548687951268e5826c268a1fd6fcc7039491f92a10b1a91ced45c157e866152b9f3185787c2375d5ff609575c9bc9db5f48026ffe80348a0e3dfaad7c9e31af9389c6c75779e79abf810097b295d459fb697bb27ed8ef0956e0030d6572c0643d06d891fbdb2164893b0dfb24b3760943878ff246eed13584e38b0ac4331dc7ed8bf254838bff698d3189431740c50ee4e7a3cf734f21cbedec6af57b54beda79aec9aa4e55eafcaac14e931d0ae7e2d2bd01a39d5f370d1ea0b47d2484d90f7ab8f29bdae85871a8fc58b893553d67d2a32db85c1af2fd9cf8d8e5d75a9c976690da20c80ec694d4dadb0c7ee11795a3bbb4c4e696094d019f39f50fe5d4e9329645de3df599f47152f714dfdc0851a4ea70fec9794e02f2a9ea98bae0066102953822c5d214708bffa25ed50bc76a96d2fdce6903046793d402dc7d489e81e88ffb73dda509205c695d3693e1910abead782624a053e9fbf64aee46b171d42165f101078135ca2dc22c0ef39d34dcda24d958db8960f2462a8c50eefc827b6e93f714557bb185c24e3a5c225bea6720a1da7fdf26be776fcf330f9725ba5ee341a5d70d3e54c5166c1f0994b94e4984e9835912c53916288306255fda8f49a7a5674361599b2b35b0f5772664c31ed832088cbd96a9af80e402b46d9502c8a364f9ee4b7820cde87cd18a1b13898edb3f97b6eee1209e0805f315b37522667fcf3fd3e6b11513220179986646758f67e8204359f9394f26d42a1e1b778e320b9b48e77ac1db8b47a4a1a02c8012ca2cde0d16fb33f8c41da4de1a4e1e10adc03c02ab7bb3fc4c4187dcfbf54e7a796b7cacbf27e033f2403ebedc26674f8a9edac15d65e1b0bc1a1fe634fd9d28bfb0c02c0a10a98a96032740458c391139436aef27e1f32ba2ed3e57ab805e9f81"
	pk, err:= hex.DecodeString(p7)
	if err != nil {
		fmt.Println(err)
	}
	ParserToInternalSlice(pk)

}

func testInternalBuffer() {
	p1 := "5c819b9f49a84168994c0bff051038ad12a1d065cea413c46cd10e9d15c3522b37e2bcd4527e7afa5788485939cdf48259182bbb923f376cc4e2115708d3d6fce210e61e9ea769f2091c6b6b9bf55dbdd1ab210c4c9eaa69e1d19f8d48ce4f4bfcddd9ab0ce4fc22a8bd437a53a18ba72af1299e7f2a5bef0a733a324a454fbeb28831bec2bd3dbd915768c159e021bb6aa76c030838594347a45000ba52ee6d78348f1ca58ff137c2843e514e8cdeb17eaee941d950bd2586f530be9f12fa614ad18aa8d8190b54ad17d2c0d62b14b3c988adad8b3384f250416113d5ac0bb5a7ed1273e2f5200a652b715ef214f0bd43fc4cb7eed3a1c97f80e47ceca1e1ab3859f5342400e67ea39faf1d3a65de645ae18026fb97055b6d4743fa9712755f69dbe7a9657e14ecaf0b89f9982a81cebc191b1a56aa674244184ac9340f80923602a6d0eb9f240a84295ad530a4c520b5bd4c02e02db68732d8ea6a39b68b4d0db012a53154cbfe682e5334623d9f43c5731c80d15eaee3f56b1ec049ff637b15e4e1a721395c1ff1f2f1eb844bed319d035f7410dcdb295553d9920c5bb1a0ffb51198c4bff4939188974c60973f323b4792c5773742ff1edc7fa9ef5746e3ff1585480fb65c43591f9debd7ca59b5bd3bd96bc32931a00717a43fb9be3cfe563bb7e258986dd5104cd73c1c2f31c0cca5fcae367658148c78ff3bea78b349596f88125f5ef77d7887eecd717ea6ac49807ae88c2b135d6058ac097a331eb9a8a89c3413d17774068d16596c0d8ac1d5fb4c0698f974902078ce7dc8e230b2c8cf2b9b80256be5e304948d154b09d4bd13bc70bcfb7ea551917e9c1f71a9d5ec3e8e79c83c7a88e41b8b5f81ad38de7f17a68eb63bdf3a80e75e0ab08a4973a0e6ac3a79e6393396677009b1c408597b80251d174a283e6a6433fc1b6ca68aab727f4fad2d5f1d6b083d731b82e2c205b4d50d25c8797cc8d1250ed2540b1eb18ea1953a33663b72e952896f0b758a6adbf820aaca604000b357f2d9904756b83d435f40d1927fa5700eaa689b80069c3bcce4857996052ff63c38b0abd78d53af68e9e3d23f81dffc25ccb48f3f4afe0eddef47d1a13369270cd00cd20e3661d668e3cc231ec1267c6df6d7b1cd355fa2abbbfda2f115f4e7cb60204c685bed2241d8fe718339413114860399aaf756c02b10db0493113f5f63e2ab5cd2e592b4cb8e11f385047bc63dc68e5cab3b04838a16019b1d3b500a056574ccc65dfc4b46ef478c24efd1d98cea63cbd4a14618c3307ab712a7081f0622401be3aa83d6b5b15741a9a74df5efe94bd93dc443aa772c60a3bb54409707377b61c91326f0996ba4b23b8334f3f6afe73bd9a44772c320e6820810d43d6ccca310e016c60a372514fa8ef96bb16729ad14ff28ecd04dfdf437e3ccf5b370a526590ea1384e5d5ccfb7f43f81991e476c2bdacc1547e3b85ae6a42850f3a2b8b9fb6f5040ad31a43cabd8dbda1cc3f9812bcaa47e408b4eb258e9d6b2bb520755c2d7968a21139d63845c0f27ab0a8a590f3fc2c9330ab43185134016c4b311948124d607c95930564beb79911c49053bebbaf4321a501e93bbdb7e28653315bb4a6372aab2e8b0b667b16ef5d5161fa08241be52a93d7d59d61963eacc11b57b0ab6400362d361a2d884005b7d7989f4ae9269ee1678dababc1a15311e2972591c148f4cb4deb04da82feed6cd6e9677e1b3cb53d0eadb3eafc8391e13815d182741bfeaa05510cdcb02cd946abc42b6472040537e640692e0f29667fa11069087d93942f0b03914ae694f4d79ad058d69c01b243cc27638a573600b5dd0468e9de0093aa322215136fcc026f18a90d713c03aceb74f895fab4c4bada5eb6d633d75c5be5d8736c0b862a4cb3d63e20ec525d8f573b8c0437aa2ba6d1e73a5e5643a552736e228e62886ee4303deca903e4cf8f6b627896e9ea94af3fedc0879573bac7c64fe38028c70e873185b0bb7f3ea597ba836871979f99c4950b740883fa2844e397d303a95982bb59cedc948f3294e7683c71b"
	p2 := "5c019120fad33885c9619a9313d9c73049455c394ce52e4d2f305b4951438ff4299d9598a22b399006904a296c3eb6fffb2d0f66bb6a3d2fc17bcf39b45f074dfbc9621d1776cfd26c61704952955b527151c60e19933c663d3b23c845b9da954740d2d196ebf49d3d5cf471288ebbc052a4bb6575eb8df89c084e0c6100798d1990267c0945805e0fda5bfccffcab88b86fa50e20a934448c468734e922dd14c5a88eb029cec6becc378cf05df0cdc45e7eb3fc987ae3e6d9137b2e0e09ef12d919f5e49346b010199ea65c20d9fa358159c876b1ce8641f55c6f78d0383d79c16f56a62d3ccadb6fc49c6f747afc773cc449d50d057a3d3748759862797952a88c19ffad3933939f707295849a4c0405ff0db28720d23f8f9acea51e279f9a046da3b7da8f92b255029a684450966518ddf8a40364f4878c99b77b8a6c7c28b99e9c6e9109c127747f17d24774d104053be5c3fe3645740ed117e1337060e2387fbe8929be918c57c9f9fd133c0892db4ea7686b55ec15a24ffb89061d02a30db2972c23e1c43f3feb5fa99f14789964666a6886accb9029ddf9378159198f3c72c4c786fd816b51ea850a9623472b721ac7f66d5dc0675a6bcadf40d4e9998aee520f7397225c5f56cd8698308cadf55b4c8857f90c7ce196b08d5c1f6d589f13591d2eeb78141ddaf81d92adb682304262761357fa50b2fac8e6156c4769da26eceb11c703f71b20ef11075de74c56e6f2990530646b8aaa3f8be84e6e89add2312752d94936a20dc045303a6718ef3a48aecfc54dc617a4ed2ced18250d31acfaf5dfffc5a709f26cd57c6f75dda8d71ac0ccd55c46a9f484a0d2b2fad66c63b5b5eb0cf3326eaeae3ae60f0c6e9dc333ac5e811721476261983373e6c30393cf4056adf1525892e11895adb04541ae13fa78379c5ba61bbcf9b85c4b2ff57897c34a3dfa23af3028f1c38ae94b57066968d07a40d8d5cde0bb3174779a6847c60b2ab1f0cf594246ac5e81f5d916f80a62fe3b85ffebea27b6917ce7a7acd200ac57d11c14ebe6431f54e1f1518fcc665f814658fa4180fe9717787122791908ccafaa1c132676a0435a1064ff1e0691fb14a29f21852b66eb0f58a63223641ebac1476d35b443c2185c5916817c201ffc2d63f870c78d199f550a9a47ca573fc21a0cfbcb5e5ca148c447a056e20f79b820309cb7039ee667ca7752037a074a7707e61aeab2587981eb18ca5d7b9fb99e80457fed0abea4e18b99b6482f6f870ea601ca3ccf36ef544265b8ab317677957aee9002e0b0041495061482cfc6d76e23e20f69568f98d479ad2152c7875a6901209aa00004d2359fc4db49bd6f534ac649c553b259ba0379cd58f8cd214bc862a08e716cc9bed7c000cdd0444457f9e5cd5207187f247db34ff387392f0a6ac67be1dd71972c52e20c2196e84cd71f628740880f760078335600301badb352e50ecc8de6b977da6dd256b1d15b412031dd737fd65c89306b5bc9d739b25cded05bcc65e0e97570af433c19181e204d4a7cc7914b02515fa537590d86a89f2c8586096de384801ad935a084ce779f6c5987ef20ee818f53d89d900047c4a6072c9fface7bb2c8c932424a81bcc708953b675fb249d8043a6af422ef52e355d9b16d87f4c96d75fcf54c3168fbbe5b16e639ca979ca1dc5c6f5c9c36a2b9ca3015ff498bff219ba317b129f45121a11db0ff7a2d58f529bab5f29ea364645083e0deef029fbb676054f228c38d11fc872eb60f4ec59bac211d5d7631273249d7e1e4dfe5dc4cf2b3838ee0a5eb8ebbe37ea7ed71b3b6594afb779114cbc433bce6512b46aecce3b5d7212b33fdf0e46307fe206b024ed3660e0b7561741d10f191478fbf49b9235ab4f98291dce6b13a60e5c2ae84f513f3976e1f85041be0f14296425ff95bc452e2714990ca870b6ad97955b259dd9ae8316e12666b44eb148be6bd26978eb6f226e6e2a8351fd34a7b815f14780641a29bb6334a284c6453af458c22ada169349101c6e85e005ba9c51260b3d45b6dd65fe73e0e7cb7ccd7"
	p3 := "5c01d42e72428cf5139cb7ac791b84886c7b7d53d1623a3b1c2056cdab011484555df022732026d815b7b94251cac00a1b5c46837b28bb5b23be2d0d818af31a2951d06250ba101b24e45159f32476daad1331f6e564ad1b704058f9349e8d5818963fada3eb8ada26d37548e1961be884077061f6546bf6e4bf139692cecc91004fa71d7b2783b45847cde60d4448b5a3b499f379ec67c65d734be0a5b068dae2a548f80a50fd02f33651889872f5ae670693709c15f5fdfe663cb2a54840eba8ea8ae6833e12951bd22a52f797497359233c618b30552c214bee34ff2a41bb3989c76a0a5a99d2df8d0b8cefd05adba82f021b4d5c7e88a8e48fd3ad22104ace9564cc8625de8a768d66ddc8a320d7a4a1667577c1b2a0d0103da5ace8c790848ca57b4031e5258dfe141dd153514f92f8ac3deb723e424675514ebd5db60ad9fe4fe6ade8e9dd4c4fe750e4dfce4f9231bf0b7ddce116ba080670d946cc4b0016c484b07e35bb91fd477c585d9d4b07d2a875c8a3c0ddde1bb7ac477596e1333c2936e30d75c82b455e408ab2766e2ae055b186a54ad348f8be2e27146fee3bfd621e8cd4c74e41bdfc7c2a79cc85764fcf571596bbd5872edde2f245296433a93c117e09525f718a193a8dc2616d827cc9664367aedb30a19ea295c5d3838fa9003d598614fe0a1c2b687330a0f8a619ad8560b797490b8a7992c4af3811abb1aff786e361a01d0fe5202acf36dca5d958df19af1512f678004a9b09c07e03c5e9ec979b6f2d625197dd299aeec114c6498470edcebab6d3009c81cc4bd7c66a3ef4475c0213b319186656b8d441eb857f23649da1e6b0a5c9ae6bd7141780759d13908ec21ffa5bc27bde33694f0d86a5f10c37927012ff87a619e9a2cabce262554936280ca4435bfc64b334f26f6cd189534d2146b3329b7e37edddd9be6c1b61dddb7d4b738881ef59b9b1a80186fb92e9b18f2c6d0a2a1a95a3963376f76c02f1d5c90a2a08e785c078f5c3a15e5e8732348e7e9b7afe8886e5f94d4c6a23569d1f6c3172a10154e76459887e237996396b341890c9138fccf8f84d73de550ed9be7b614f77f2207d43e047fb986465f9eaad77f50fbd9e409fd789382ce5bc5b70d12b92d71ce47f1fd9810a0de191ab1aa8244b6ed07ca7fc620bea792df9a3fd64f4edd612fc656ddb816b9de6aa4d0192ccbe00bfee2b0c9b95a00c0850265ae6cda7a686b7420f2e6d799c4303b57e59f62d2bc4ca602a5705ce4630aa31e267ee26bb26f2ce8cc11b5204c54f848f5ec31a05ebbfb49763d1ef03717627ac8ae7abbc25d6dde401201d7410673ce8826fc5468afefe8428bf295da7a52aa4b407288f817bf0a104e4c083db895251bcdb34144413430941e7becea5e9bb977e7ad35a0aaa5e7b577be0bcb844a56d37fd036bfef8bf16e272d76338dc39f97cbfa844cf4d1eb0f262422484c22e0a31d2dce14fb37dc91613be7481f52889d4c89a751e8d6e124e15e3ecfa707257ac7e71f6f456e971cfcb36c3897cc26fc5a68a996b5dc753ce8b18b39e3ce41b07c647b661c97858fd4724c4c36c1a600dad51dde0cc2b63d711c2dc45251b35fe194ff9edaf43b0c9cce3696dddbb5afcc43afdfe7c1e2ebd14695a94704a3a4e8511dc00e9d18a899f1ddf847ec6e81e10c9279f9d2087b84d7dd2f3081e2328276b86a0f7914d3a58ee723f68ad8e693a4795c8c9682eeec77559c601a4ff3538033c01fb9f349056be35dc38f8802a311fce92fd6cda66bb814b01b42735fcbe5065502f91e1673f1f86ac83e509af1bd1b6a3dfb85e5503d77988499806f3db0ad7303476509f66880721413322ca8e4be59812a470541c965b08fa6eb5bb4d017ec387375c4a5aeb5583d6044bb9c4c86ff3dda04d8b0dffa6c7de886ad3f39d7cd9b860cde90deb1e7e3ad4f6081c952fba238c53b799cb30409929ea13a98910c514e890ee14a9c272cc34ac7d7f1d0163f86ee37506241076f629a7f5964487b2ffd9da2371de91fb5902e32701254bb7d6bb3241f32c023dc5"
	p4 := "5c0187dc5510ea0f039c00700825e57a0d45705fff39b6ddc26f4e25e18278d10bdc316d9e9692533cdbe83c614762e75969c54f516457de718db11de86b4ad12f292a36ede376ebf2e3c42b372f8c802971312cf48fcabdc9905e8358e3bf406f3f5ca6a9256f1a05b9ae72adef532a3eb0cd7518e36d9eb191105b60370157d1a2fb113e8531ff15e4867e18de043882e34d6091f2a54381ac91adcb326a180a3e7fadea5bea92eb8f85a274ee7a0617420c51b0c6d1d5897ec553d03b453f5b9dfa2e88fc30f002abc92c542843a8f496cffcd391f084f96166e124897ba30eedbded51677211eb31d1f25f8d4dd9293a1ff14f2d295ff25d75a455cb5355b038f5e2e55122dd74efb4d8d05e9fa545432a2c65d4a10a5ce4d916b130f86fb90b2becebb1b855afbfbf59ee57705a3172ca8b7c9278d7f174ac295ba4febcbbaa65e6dea42e8c614228795fb835b6f82ee0755a9e8c847bc0124e926826a503d72b8553c2c850ba6d6e4de8ae48bbb0a334761095f737a50b99607be23005095e6f00123a2bcc9f8a22888136a8442f6253f4892bf701311060d9825b1ac248084955c7869eb6aed5d16a7b42e509b5e2c7cedd87455d7e91e368ec3f6b7ee8db5b4034ad80ae877f19bbf32dd0ebb66df4ca779980d3d780fac1b3a478070bd0a552424e77d3036eb46865374ddc3e655f374aa320bcedc9c5f0bd9be7563f5e688cd738e165efc0672d0b04c25d81122b56c049663152da49ecbfe4a48b58f9f5308ff75e07dc4a3fa520f3ff996dbf8e9b273af1689ade84c0529359574f2cfae4d44e8889b54559641cbfce83d9d297e376a3cf12acadf1fc4ae59f7351fc736c40d97de96f4b65a5a3c011d168d9ea308fc5a7e13052fcd512d4e596d45cecc4c247fd979a92d144130e54cecbe983339411d508b0d4b75ed3adc9d3c5ee287793a750f8d215a71ac0c59f14bad08a0f119e1f9655268981d5d9379126e6af68ff431d79ca2cbc308645a7d112fe4560f52add610169a71f9d7c4a398cc03e05075a0334574de8384412b11c09e8426d890e8c36c1312bc3253a06a72d6a1e2f6223147c85bdd5b5cf942cfb90970803918a95574a7f9aa8fb64a1cb284318914e432935a49df2f456a70730b5a3fc82fcbf6c7619ca0daa5007c19a6e43314d3a186b7b553b11aca9e72c83ee39d8a70cb74a9388adba7d5872ada05f43b222e40acb83f1efd012ce942a152b41db6f8c43a5649b1e570f6078b0fe2ea7d67064b0c7c9868d86e26372d1b3793592e4f7f24856c001b80e19e82df1dd795adf2f382c2ca9c6730bba8745a692a42aa704aaa34d02bb06596b2f17a20a9139d1cf18d55d090368ff39ed81e55f3a45f1eb18c855f963a572fb9eb46e188a2f69c95d0900e218bf4f45846c66383a02c5fd8f5dfc3e49d25a84976dce57af74da14a48941a31d0aa69c565f2e319e68e461191490241179eaa976734083180008f08bb023717f10382c43bcb7cae7ce19f3576042ca8eff193e7a9d50b307ed0168696e880842a445185cdec2be071fe106c55c654b7153b5562271f7637debaa4f60f5028a56b83d86dbcca86f57926075469d5fe918c4603e346b5f68b8fb6063dd0d0efcbc698b42e7797d3b8f28fc4c5b5eb5d64fafbf57f9db74747f65ef39f479254a4290f57232320cb4ed30d34e02ed50158c488c59032f5b038d9d1ddf562910f5880324fba2e1f77a97e9a9cdd769dfd49595e6a01a0ae8afcbbacf25e9fd9206cf442f50977bcba42c954c154032e9ae88f7ef5ef5fc34283b652d7208e09bf05f072738897558c8adda1d716750eb530ef6473b46450d1b37a7c6a9aa5537402b0d26b3778b52c2e4f9bea57c2b6b72992e7085cc2352e5f6209f905702864b1dac706d6f00c784088f10408aaecb2074d179c523fe2be7e918e51ca71ad1611042823f6f3c6acf262ff7d5d8a6e03deb0a9e2d7f011b20a4e2da5c419d6ca6b7e0af3a0554f81ecfc21d47d95426179db900a4c2e49701fa7d8e7ea9d5ec393c7f55a052ec5ea996112d"
	p5 := "5c014137e6a954f9b9f74ab72252b5c8b53acb7e39de9c3d795cd56e90c36ce6019a35697f5f34d8d5ef21b3aa7cb3f609a6833c7aed8314bafc17bee7c6eb0d6de246d2f499cbf230f54350a7e0387283d1b0188a20af1c254cadd08a7799801797c8e79a80a20c90d47e0fe80b12b6689ce1dcd14d489527d8dfc57c12a5c570c3c644771b944e08b39e2b3c77d183aa1a9e5a660c716f13435e75751257fb29684c8f3b6b93befb0d70b485e8bb72dd827ceaabbb656de03a9877bb726b199ce992470778f9c8a57b6248c59e68f31ba396f7661fa5365577f5aa5d536f18ca398563908209267bfdf432a9e53fca98e19c25f77ed77dc4d5e7183cdd1575ddf909fda8afd31da3c2d0ba3ade2f1dabd0f8fa3c0eed3b925595e515ba9546377dc4da353c27fcdb8edd297f22e4bbc35408119f840ef8fe3d8702e451812820f3ecb7216f5ac9cfedd1258f8d1926be19a9841d0af7f6620c421623dd1799729a3aefd072d8a90b4b3e500d4bd0323f0e1d8745b672663d9fbd45f6bd8731401ddb5515eb224e056516663be4b4def4ceb801b1398c10307f07ddc2c4a67697f7fe5bee052fae0cba666282f82d6f2be883014e1eb02b4dd3e76f726b2e4490dd5d5ac3b136cbc804195fe7be9d7ba908aa04a82db08aadbb564f952eeb27815f466c04526419315393d0cae56e1a5176902a00df64d8c991c8b61e3aef361e4b88fe5378965e5064ae131d03bbc60bfff0f442747c04bafbda43a44e68ddacb2268715e77a8184c0b09360b5f09fc1ef615fec84acf62ecbda23fe18d2a8f564ff789acc843b9978c61e112256ae30273ff5ee036099beaece3eaffd1f9b94dd5059de9624cd117a3accc22ac4675ce94d4572bcc9c1e7a4a5c68f04462e78f78a3feb4a3b74440af5e74a85858f544247c71dc3d7ed1e1d1c5356ae8d138c0b8e013e4f82f90da81f312ba1de9709cd5fbec1dc54210f585e436056999a54ba9a0a4479538ef7dc4da5573770f229b779bc83aa861e4be55cab4d0bdffe87ff6d6b05fd931316389d024a3b749cdd89b0ccfc02c0b130c14f2d9be64484bc221a246d26b70eebf49bd9d1deb5980d74137c96cb77132620e82675aa620a036bae2b69039e5b937032d8bacd6b0bb4cc2f5cdb7fef6ce149353e1abe254fd9e0359e50c274fa036d73d94bd2672d808b073b6694b14417c9d1c2f1ec54a8bd59b6a0886b3cf19080d6d58ee76e6ea3d54068add5d1533268869deb0867bf37c5f5ffab5a8751e93d82cd3b12cce7731f42a3d2cf170a7474497a355c9eda5ba21c42502351b67f1b08b70cd51e305674b73fe4adc41d8410810ee41991aba5ad1e9772eb5e42f48c0dd22fc165971d766a91fa858bada3a224a48fd1dcd1b245cc744e7e3b9ec78c26b6cc9ebadb1f34b3f884a0ba2ae997150a8f65a18249cd49752682684b9c5c9cfb166aaf9746593a8e64521379b8cbfde0e85fcd0393e3d71b92958c0265be9a67bfa0d2e3efc8b486dd3022fbbde3000711cdd3379d3ba55616614e31bf63c2b785fc9a29ce2baee078a6963a62c8069f44d2c2c53f18b3ce9e567c74e3438675d509c89d12067dbcd682694f4b18f9759a365e74330c4016a0f4ea336d19cc039c9db9795cfcf974fa1b8b87bfdff2161f9e0aa9c6a894d65449eb162fddca9ba7dd7114dc7b0ed9531e884008e91430cb69ef563225eac87994190fd011632583ca7c15fbd9ed5c73265a62e80093634b640c8d4717fdb3f560790b05327633b33e6ca41ec27340acaaa9f566a065a40c7f1928ae8d008b08742fc24acf6a750a40f7b00668bac8f81a1cb1926e24d6542a4bb53e224762d2bacf4c45fde81b0e2b6a79a6ec1416ce08563b6c61b2bbf6fd75d6fbfe266793ffd6b3f285e7466ebf8bc4259fcf6d5401dbb122f0647852b7fe55f0734aae5047dbaa4fc83a0356f1496afa5af9d75527f49a657ce24dd414e1012238cbc635676c6c3b9692e27335023a951903cf0c1a35d4338dae6e0e136e3b5f9b57641f469755dc968559818d3c264636de0e"
	p6 := "5c41bcdb5930b747738f0aabbf91b69154d28e909057fe5239531b8f961ccc316b69d32f175d903ebfc8a76ac333be008f310cb0b99fdde9175501c26f9ef54ef1dcb579dfa401787c125dfab859b24e3f78fd214fcb9a97c143413e04fef2f8aa34f2a18ff54b8a7864a9d8adc3d3156040677e2b35697835f7752a15231bb5a344d172b5e9ce90f8325a2b4280d4410e60997b812e1ff883d0a2e9ddc3b4ba08997075478a40314909a3c9801f427ebc8cde5d3ab717258b03b76f5c0fd1277671292a041a384b5b6d40f0e87a137b120cbb35c966be6d28e4b3dc4c5d0696d90c7295d79a5a204453ac4e26961e3a33e1f2f06ea8d6208eb3fe204104b6cdb08ae5c758ba5497ee5a3d76327adf64ff6ed2d60c17276fcef3b32b7c418c35cc7a00fff2cd72fb1c5aebb036b42ccd06180c0b4ef0646d8082fd267dcbd6b36d336c9170c098915569f32b5de341ff5c0f898949dd342b56492e8eb9cdecef90af08b55b42be29dad9f8995739c2093b825a465fb976822af93e96a7a1ff2015536b2a877473e22ebe26998b925ae19cfbd10d53808d6429ac2001e4645ec63cc48af24300c318abf6af41c432be8a81f346a15feca5c35d07c14c676504d318fee13d26366dea484db1aeb400357ee9c4210e1a2519b581fc8edba2e9c32f4cfb561a63525969a6a2f79f10615cfeb9e2d3b817143051d0dd77c945b43be987f8197ff1f499a383e5439300f21b124b933349d2b55b9775aa5af0bcd443d04c765e2e9b759794e28e8d0250d400a828cc40b6a4ff7665b5e7bdcf6a58aacf2da71df024c6d332f82f32890358ce4a2dca5b76b29d010bd06bea4f678b88ea2f9aab01cb218ae477ceb15639ab2968eabc46e3a99f0e25776b9ab397a5100bb9b650e2e68d936ad96ce86c0ff93dfd6cea8da3e440480ee7a41932ca4a4e4bd2b8f92d0c3e935f2b0d4218ae076f8cb6f02ec8d506f7bc9479f7d2f52d818e6df37cbe4772b22b2bad4639e94c53910014993052feeeff95410f7634b6134238cfbbfc9fac57539358c4ce999a1b8238d0c1dd112b7d87eb7eb5204912984280dbc097b3411573cbec4e077afe25a7c0a91744c4c95e67d7caab98d495b1de97718c842b02a2ba2b1602de181a66ea8fd37a6d4d9837d58518dcebe5def2e05ebf3053ba355c33d90528fc97dc634c62255d08dd6b44208e1086c249576b56247b94de80e40d2e442dd4c0e1dadd3ad12ccb93"

	pkt := []string{p1,p2,p3,p4,p5,p6}

	//fmt.Println(h1)

	parser := h264.NewParser()

	for i := 0 ; i < 6 ; i++ {
		pk, err := hex.DecodeString(pkt[i])
		if err != nil {
			fmt.Println(err)
		}
	
		if parser.ParserToInternalSlice(pk) == true {
			fmt.Println(hex.EncodeToString(parser.GetInternalBuffer()))
			parser.ClearInternalBuffer()
		}
	}

	p7 := "419fe145152c6758fdbd5c8004c5d52335a12a8d4aab7e6a5207fd275bdf12a41e9891b6466dc29feb27ca8d590e6c6b5d2c9a621bf7df34447fa105276ebfac5d7b900ba1c01dd7c9afd01fe2f340852839a974b1035c74dcb9a393cf065c5ca6d3934a07eef4c0aa5efdff7c074cbf1f3661ed3d37e3256500ba75128edaf118e6a837a7360344f57c24c2355f5ddf75ce8915ceba383f38c766481849a40daf84dc3969ef129d9fd2d64ef3df9073cada21b0037274b7e1a686defcb2e1cbbc03231032029ae2e9e30f9683ea9945ad30ba4fcfc391e1065c589781ddf7531e56706fae22283997bc11f979674ee80e9e79b2481f3a9f9fd1aebc9a70239b064f1c6ab00999a5d8e8b1bb229969e1ca63da50258a447b7f437e817368b6ff71ae19bd48d0d270259a019427ce0c338381a90ddf1e232c2c9b7a21abef7572f105faf55d844bb1c5e78510d7f467204fb7d3be63dd72cce87f47c44ef7cb0ae1df3b893410f75c64573ae46149b856100948f1e16b891cf928e3d4ad98668a6136d62b6045d578715ade16f30b365eee4f6b20360ce0a94255f7c48e7eb1d4e99606bc63f756f5a8f7865a272c0a40d1ab1e731aaafc53a4e01173f3106524b94dcfbb6de487c1596cbc2b70856579611ccfc0228222e1f818ad15eb33517af3885225683f9f74ee2976678718b014ec10c7661e701594fb214f3214804cfd03757ea413bcad1fc77fa986483eb25ca498b43ec5a294b1461d449679b543906e241b80346309ca0ffd3b2ef4b8e2df76f4d27a668966e9937052dea1d6663bc8ab39402cc54b465262168dc1c5678e814c9b875c2b848a3ac39688d2b8e6c24dbf6ea3139658470e9befb0c9c204ed1db62fba18d5053de7b03f5ebebe90ee32862f0eb0e7459dc12d876d4930aae673118eab182b0c5bd464c8cfdb7ce04aa7c88abc0e3f9183335f2c87bd0b0ad2d2b9b31aaa062b85d89c0c92ecfa70b43e94a527a275fc59459fea0356b2f977062a59a3bca77bbb4b2b19332b8f48b505fd1429fe8777a69a8698602139c61731ce14ba3598fee9b24548687951268e5826c268a1fd6fcc7039491f92a10b1a91ced45c157e866152b9f3185787c2375d5ff609575c9bc9db5f48026ffe80348a0e3dfaad7c9e31af9389c6c75779e79abf810097b295d459fb697bb27ed8ef0956e0030d6572c0643d06d891fbdb2164893b0dfb24b3760943878ff246eed13584e38b0ac4331dc7ed8bf254838bff698d3189431740c50ee4e7a3cf734f21cbedec6af57b54beda79aec9aa4e55eafcaac14e931d0ae7e2d2bd01a39d5f370d1ea0b47d2484d90f7ab8f29bdae85871a8fc58b893553d67d2a32db85c1af2fd9cf8d8e5d75a9c976690da20c80ec694d4dadb0c7ee11795a3bbb4c4e696094d019f39f50fe5d4e9329645de3df599f47152f714dfdc0851a4ea70fec9794e02f2a9ea98bae0066102953822c5d214708bffa25ed50bc76a96d2fdce6903046793d402dc7d489e81e88ffb73dda509205c695d3693e1910abead782624a053e9fbf64aee46b171d42165f101078135ca2dc22c0ef39d34dcda24d958db8960f2462a8c50eefc827b6e93f714557bb185c24e3a5c225bea6720a1da7fdf26be776fcf330f9725ba5ee341a5d70d3e54c5166c1f0994b94e4984e9835912c53916288306255fda8f49a7a5674361599b2b35b0f5772664c31ed832088cbd96a9af80e402b46d9502c8a364f9ee4b7820cde87cd18a1b13898edb3f97b6eee1209e0805f315b37522667fcf3fd3e6b11513220179986646758f67e8204359f9394f26d42a1e1b778e320b9b48e77ac1db8b47a4a1a02c8012ca2cde0d16fb33f8c41da4de1a4e1e10adc03c02ab7bb3fc4c4187dcfbf54e7a796b7cacbf27e033f2403ebedc26674f8a9edac15d65e1b0bc1a1fe634fd9d28bfb0c02c0a10a98a96032740458c391139436aef27e1f32ba2ed3e57ab805e9f81"
	pk, err:= hex.DecodeString(p7)
	if err != nil {
		fmt.Println(err)
	}

	if parser.ParserToInternalSlice(pk) == true {
		fmt.Println(hex.EncodeToString(parser.GetInternalBuffer()))
		parser.ClearInternalBuffer()
	}
}

func main() {
	//testParserNaluHeader()
	//testShardAUnitPack()
	testInternalBuffer()
}